<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create - The Living Library</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/create.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Background -->
    <div class="background-container">
        <div class="background-image"></div>
    </div>

    <!-- Header -->
    <header class="header">
        <button class="menu-btn" id="menuBtn" aria-label="Open menu">
            <span class="hamburger"></span>
            <span class="hamburger"></span>
            <span class="hamburger"></span>
        </button>
        
        <div class="logo-container">
            <a href="index.html">
                <img src="assets/TTLheaderlogotransparent.png" alt="The Living Library" class="header-logo">
            </a>
        </div>
        
        <button class="search-btn" id="searchBtn" aria-label="Search">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.35-4.35"></path>
            </svg>
        </button>
    </header>

    <!-- Navigation Menu -->
    <nav class="nav-menu" id="navMenu">
        <div class="nav-content">
            <button class="close-btn" id="closeMenu" aria-label="Close menu">×</button>
            <ul class="nav-list">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="#" class="nav-link">Browse Collection</a></li>
                <li><a href="#" class="nav-link">Subjects</a></li>
                <li><a href="#" class="nav-link">Types</a></li>
                <li><a href="create.html" class="nav-link active">Create</a></li>
                <li><a href="#" class="nav-link">About</a></li>
            </ul>
        </div>
    </nav>

    <!-- Search Overlay -->
    <div class="search-overlay" id="searchOverlay">
        <div class="search-container">
            <button class="close-btn" id="closeSearch" aria-label="Close search">×</button>
            <input type="text" class="search-input" placeholder="Search the library..." autofocus>
            <button class="search-submit">Search</button>
        </div>
    </div>

    <!-- Main Content -->
    <main class="create-main">
        <div class="create-container">
            
            <!-- Progress Steps -->
            <div class="progress-bar">
                <div class="step active" data-step="1">
                    <span class="step-number">1</span>
                    <span class="step-label">Concept</span>
                </div>
                <div class="step" data-step="2">
                    <span class="step-number">2</span>
                    <span class="step-label">Details</span>
                </div>
                <div class="step" data-step="3">
                    <span class="step-number">3</span>
                    <span class="step-label">Structure</span>
                </div>
                <div class="step" data-step="4">
                    <span class="step-number">4</span>
                    <span class="step-label">Generate</span>
                </div>
            </div>

            <!-- Step 1: Concept -->
            <div class="prompt-step active" id="step1">
                <h2 class="step-title">What is your book about?</h2>
                <p class="step-description">Describe the core concept, theme, or story you want to explore.</p>
                
                <div class="input-group">
                    <textarea 
                        id="conceptInput" 
                        class="prompt-textarea" 
                        placeholder="A detective story set in a world where memories can be traded as currency..."
                        rows="4"
                    ></textarea>
                    <span class="char-count">0 / 500</span>
                </div>

                <div class="suggestion-chips">
                    <span class="chip" data-prompt="A coming-of-age story about a young witch discovering her powers in a modern city">Young Witch</span>
                    <span class="chip" data-prompt="A historical fiction about the lost library of Alexandria from the perspective of a scroll keeper">Lost Library</span>
                    <span class="chip" data-prompt="A sci-fi thriller where dreams are harvested for energy">Dream Harvest</span>
                    <span class="chip" data-prompt="A romance between two time travelers who keep missing each other">Time Romance</span>
                </div>

                <button class="next-btn" onclick="nextStep(2)">Continue</button>
            </div>

            <!-- Step 2: Details -->
            <div class="prompt-step" id="step2">
                <h2 class="step-title">Refine the details</h2>
                <p class="step-description">Add specific elements to shape your narrative.</p>

                <div class="detail-grid">
                    <div class="detail-field">
                        <label>Genre</label>
                        <select id="genreSelect" class="detail-select">
                            <option value="">Select genre...</option>
                            <option value="fiction">Fiction</option>
                            <option value="mystery">Mystery</option>
                            <option value="sci-fi">Science Fiction</option>
                            <option value="fantasy">Fantasy</option>
                            <option value="romance">Romance</option>
                            <option value="thriller">Thriller</option>
                            <option value="historical">Historical</option>
                            <option value="horror">Horror</option>
                        </select>
                    </div>

                    <div class="detail-field">
                        <label>Tone</label>
                        <select id="toneSelect" class="detail-select">
                            <option value="">Select tone...</option>
                            <option value="dark">Dark & Gritty</option>
                            <option value="light">Light & Humorous</option>
                            <option value="epic">Epic & Sweeping</option>
                            <option value="intimate">Intimate & Personal</option>
                            <option value="suspenseful">Suspenseful</option>
                            <option value="melancholic">Melancholic</option>
                        </select>
                    </div>

                    <div class="detail-field">
                        <label>Target Length</label>
                        <select id="lengthSelect" class="detail-select">
                            <option value="">Select length...</option>
                            <option value="short">Short Story (5-10k words)</option>
                            <option value="novella">Novella (20-40k words)</option>
                            <option value="novel">Novel (60-100k words)</option>
                            <option value="epic">Epic (150k+ words)</option>
                        </select>
                    </div>

                    <div class="detail-field">
                        <label>Point of View</label>
                        <select id="povSelect" class="detail-select">
                            <option value="">Select POV...</option>
                            <option value="first">First Person</option>
                            <option value="second">Second Person</option>
                            <option value="third-limited">Third Person Limited</option>
                            <option value="third-omni">Third Person Omniscient</option>
                        </select>
                    </div>
                </div>

                <div class="input-group">
                    <label>Key Characters or Elements (optional)</label>
                    <input type="text" id="elementsInput" class="detail-input" placeholder="A reluctant hero, a sentient AI, an ancient curse...">
                </div>

                <div class="button-group">
                    <button class="back-btn" onclick="prevStep(1)">Back</button>
                    <button class="next-btn" onclick="nextStep(3)">Continue</button>
                </div>
            </div>

            <!-- Step 3: Structure -->
            <div class="prompt-step" id="step3">
                <h2 class="step-title">Choose your structure</h2>
                <p class="step-description">Select how you want your narrative organized.</p>

                <div class="structure-options">
                    <div class="structure-card" data-structure="three-act">
                        <h3>Three-Act Structure</h3>
                        <p>Classic setup, confrontation, and resolution. Best for traditional narratives.</p>
                    </div>
                    <div class="structure-card" data-structure="hero-journey">
                        <h3>Hero's Journey</h3>
                        <p>The monomyth structure. Perfect for epic tales of transformation.</p>
                    </div>
                    <div class="structure-card" data-structure="episodic">
                        <h3>Episodic</h3>
                        <p>Connected standalone chapters. Great for character studies.</p>
                    </div>
                    <div class="structure-card" data-structure="nonlinear">
                        <h3>Non-linear</h3>
                        <p>Time jumps and fragmented narrative. For experimental works.</p>
                    </div>
                </div>

                <div class="input-group">
                    <label>Special Requirements (optional)</label>
                    <textarea id="requirementsInput" class="prompt-textarea" rows="3" placeholder="Include a plot twist at the midpoint, avoid romance subplot, feature multiple timelines..."></textarea>
                </div>

                <div class="button-group">
                    <button class="back-btn" onclick="prevStep(2)">Back</button>
                    <button class="next-btn" onclick="nextStep(4)">Continue</button>
                </div>
            </div>

            <!-- Step 4: Generate -->
            <div class="prompt-step" id="step4">
                <h2 class="step-title">Review & Generate</h2>
                <p class="step-description">Your book blueprint is ready.</p>

                <div class="review-panel">
                    <div class="review-section">
                        <h4>Concept</h4>
                        <p id="reviewConcept">-</p>
                    </div>
                    <div class="review-section">
                        <h4>Details</h4>
                        <ul id="reviewDetails">
                            <li>Genre: <span id="reviewGenre">-</span></li>
                            <li>Tone: <span id="reviewTone">-</span></li>
                            <li>Length: <span id="reviewLength">-</span></li>
                            <li>POV: <span id="reviewPOV">-</span></li>
                        </ul>
                    </div>
                    <div class="review-section">
                        <h4>Structure</h4>
                        <p id="reviewStructure">-</p>
                    </div>
                </div>

                <div class="prompt-preview">
                    <label>Generated Prompt</label>
                    <pre id="generatedPrompt"></pre>
                </div>

                <div class="button-group">
                    <button class="back-btn" onclick="prevStep(3)">Back</button>
                    <button class="generate-btn" onclick="generateBook()">
                        <span class="btn-text">Create Book</span>
                        <span class="btn-loading" style="display: none;">Generating...</span>
                    </button>
                </div>
            </div>

            <!-- Loading/Result State -->
            <div class="prompt-step" id="stepResult">
                <div class="generation-status">
                    <div class="spinner"></div>
                    <h2 id="statusText">Building your book...</h2>
                    <p id="statusSubtext">This may take a few moments</p>
                </div>
                
                <div class="result-panel" style="display: none;">
                    <h2>Your book is ready</h2>
                    <div class="book-preview">
                        <div class="book-cover" id="bookCover">
                            <span class="book-title" id="resultTitle">Untitled</span>
                            <span class="book-author">The Living Library</span>
                        </div>
                    </div>
                    <div class="result-actions">
                        <button class="action-btn secondary" onclick="resetForm()">Create Another</button>
                        <button class="action-btn" onclick="saveBook()">Save to Library</button>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <p>&copy; 2026 The Living Library. All rights reserved.</p>
    </footer>

    <script src="js/main.js"></script>
    <script src="js/create.js"></script>
</body>
</html>
